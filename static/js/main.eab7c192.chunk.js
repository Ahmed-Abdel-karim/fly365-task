(this.webpackJsonpfly365=this.webpackJsonpfly365||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(51)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(16),o=a.n(l),s=(a(22),a(5)),i=a(4),u=a(1),m=function(e,t){var a={isLoading:!1,data:t,resolved:!1,rejected:!1,error:""},n=Object(r.useState)(a),c=Object(u.a)(n,2),l=c[0],o=l.isLoading,s=l.data,m=l.error,d=l.resolved,p=l.rejected,g=c[1];return{isLoading:o,resolved:d,rejected:p,data:s,error:m,asyncFn:function(){return o?Promise.resolve("isLoading"):(g(Object(i.a)({},a,{isLoading:!0})),e.apply(void 0,arguments).then((function(e){var t=e.data;g(Object(i.a)({},a,{isLoading:!1,resolved:!0,data:t})),Promise.resolve(t)})).catch((function(e){g(Object(i.a)({},a,{isLoading:!1,rejected:!0,error:"error occurred please try again later"})),Promise.reject(e)})))}}},d=a(6),p=a.n(d),g="http://my-json-server.typicode.com/fly365com/code-challenge",E="".concat(g,"/hotels"),f="".concat(g,"/hotelDetails/{id}"),v=function(){return p.a.get(E)},h=function(e){return p.a.get(f.replace("{id}",e))},b=(a(40),c.a.createContext({})),N=b.Provider,j=function(e){var t=e.children,a=Object(r.useState)(""),n=Object(u.a)(a,2),l=n[0],o=n[1];return c.a.createElement(N,{value:{message:l,setErrorMessage:o}},t)},O=function(){var e=Object(r.useContext)(b).message;return c.a.createElement(c.a.Fragment,null,!!e&&c.a.createElement("div",{className:"error-message"},c.a.createElement("div",{className:"alert alert-danger",role:"alert"},e)))},y=(a(41),function(e){var t=e.className,a=void 0===t?"":t;return c.a.createElement("div",{className:"spinner ".concat(a)},c.a.createElement("div",{className:"spinner-border",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))}),C=function(e){var t=e.isLoading,a=e.error,n=e.rejected,l=e.children,o=e.resolved,s=Object(r.useContext)(b).setErrorMessage;return Object(r.useEffect)((function(){return s(n?a:"")}),[n,a]),c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(y,null),o&&l)},k=(a(42),a(43),a(3)),w="bad",S="fair",x="good",P="very good",D="excellent",F=(n={},Object(k.a)(n,w,{to:5}),Object(k.a)(n,S,{from:5,to:6}),Object(k.a)(n,x,{from:6,to:7}),Object(k.a)(n,P,{from:7,to:8}),Object(k.a)(n,D,{from:8}),n),A=function(e){var t,a=e.data,n=e.nights,l=e.isSelected,o=e.selectHotel,s=a.name,i=a.photo,m=a.id,d=a.pricePerNight,p=a.totalReviews,g=a.totalScore,E=Object(r.useCallback)((function(){o(m)}),[m,o]),f=Object(r.useMemo)((function(){return Number(d)*Number(n)}),[d,n]);return c.a.createElement("li",{className:"hotels-list-item col-sm-12 col-md-6 col-lg-4",title:s},c.a.createElement("button",{className:"item-container rounded ".concat(l?"shadow":"shadow-sm"),onClick:E},c.a.createElement("h2",{className:"item-title"},s),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-5 img-container "},c.a.createElement("img",{src:i,width:"100%",alt:"".concat(s," phote")})),c.a.createElement("div",{className:"col-7 info-container "},c.a.createElement("p",null,"$ ".concat(f," for ").concat(n," night")),c.a.createElement("p",null,"".concat(g," ").concat((t=g,Object.entries(F).reduce((function(e,a){var n=Object(u.a)(a,2),r=n[0],c=n[1],l=c.to,o=c.from;return t>=(o||0)&&t<(l||1/0)?e=r:e}),"")))),c.a.createElement("p",null,"".concat(p," review"))))))},L=(a(44),a(45),a(46),function(e){var t=e.onClick,a=e.value,n=e.active,r=e.children,l=e.className,o=Object(s.a)(e,["onClick","value","active","children","className"]);return c.a.createElement("button",Object.assign({value:a,onClick:t,className:"button ".concat(n?"active":""," ").concat(l)},o),r)}),M=function(e){var t=e.pictures,a=Object(r.useState)(0),n=Object(u.a)(a,2),l=n[0],o=n[1],s=Object(r.useState)(0),i=Object(u.a)(s,2),m=i[0],d=i[1],p=Object(r.useRef)(),g=t.reduce((function(e,t,a){var n=t.photo,r=t.thumbnail;return e.photos.push({id:a,photo:n}),e.thumbnails.push({id:a,thumbnail:r}),e}),{photos:[],thumbnails:[]}),E=g.photos,f=g.thumbnails,v=Object(r.useCallback)((function(){o((function(e){return e<E.length-1?e+1:0}))}),[E.length]),h=Object(r.useCallback)((function(){o((function(e){return e>0?e-1:E.length-1}))}),[E.length]),b=Object(r.useCallback)((function(e){o(e)}),[]);return Object(r.useEffect)((function(){if(p.current){var e=p.current.offsetWidth,t=104*f.length;d(t>e?t/f.length:0)}}),[f.length,p.current]),c.a.createElement("div",{className:"gallery"},c.a.createElement("div",{className:"photos",ref:p},c.a.createElement(L,{"data-testid":"previous",onClick:h,className:"round btn-control left","aria-label":"previous"},"\u2190"),c.a.createElement(L,{"data-testid":"next",onClick:v,className:"round btn-control right","aria-label":"next"},"\u2192"),c.a.createElement("div",{className:"photos-container","data-testid":"photos-container",style:{width:"".concat(100*E.length,"%"),transform:l>0?"translateX(-".concat(100*l/E.length,"%)"):"translateX(0%)"}},E.map((function(e){var t=e.photo,a=e.id;return c.a.createElement("img",{src:t,key:a,width:"".concat(100/E.length,"%"),alt:"gallery item",title:"gallery-photo"})})))),c.a.createElement("div",{className:"thumbnails"},c.a.createElement("div",{className:"thumbnails-container",style:{justifyContent:m>0?"flex-start":"center",transform:m>0?"translateX(-".concat(l*m,"px)"):""}},f.map((function(e){var t=e.thumbnail,a=e.id;return c.a.createElement("button",{title:"gallery-thumbnail",onClick:function(){return b(a)},key:a},c.a.createElement("img",{src:t,className:l===a?"active":"",alt:"gallery item"}))})))))},z=(a(47),function(e){var t=e.pageSize,a=e.totalCount,n=e.page,l=e.handleChangePage,o=e.itemsInPageCount,s=Object(r.useState)([]),i=Object(u.a)(s,2),m=i[0],d=i[1],p=Object(r.useCallback)((function(e){var t=e.target.value;l(Number(t))}),[]),g=Object(r.useMemo)((function(){return Math.ceil(a/t)}),[t,a]);Object(r.useEffect)((function(){var e=Array.from(new Array(g).keys(),(function(e){return e+1}));return d(g-n>2&&n>1?e.slice(n-1,n+1):e.slice(0,n+2))}),[n,g]);var E=Object(r.useMemo)((function(){return(n-1)*t}),[n,t]);return c.a.createElement("nav",{"aria-label":"page navigation",className:"pagination"},c.a.createElement("p",{className:"font-weight-bold"},c.a.createElement("span",null,E+1)," ",c.a.createElement("span",null,"-")," ",c.a.createElement("span",null,E+o)," ",c.a.createElement("span",null,"of")," ",c.a.createElement("span",null,a)),g>1&&c.a.createElement("ul",{className:"pagination"},n>1&&c.a.createElement("li",{"aria-label":"previous"},c.a.createElement(L,{value:n-1,onClick:p},"<")),!m.includes(1)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement(L,{value:1,onClick:p,active:1===n},"1")),c.a.createElement("span",{className:"separator"},"...")),m.map((function(e){return c.a.createElement("li",{title:e,key:e},c.a.createElement(L,{className:"page-link",value:e,onClick:p,active:n===e},e))})),!m.includes(g)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"separator"},"..."),c.a.createElement("li",null,c.a.createElement(L,{className:"page-link",value:g,onClick:p},g))),n<g&&c.a.createElement("li",{title:n+1,"aria-label":"next"},c.a.createElement(L,{className:"page-link",value:n+1,onClick:p,page:n},">"))))}),T="ASC",G="DESC",R=function(e){return function(t,a){return a===T?t.sort((function(t,a){return t[e]-a[e]})):t.sort((function(t,a){return a[e]-t[e]}))}},H=function(e,t,a){return e.slice((t-1)*a,t*a)},I=function(e,t,a){var n=Object(r.useMemo)((function(){return e=R(t),function(t,a){var n=a.type,r=a.payload;switch(n){case"SORT":return Object(i.a)({},t,{sortType:r,sourceData:e(t.sourceData,r)});case"CHANGE_PAGE":return Object(i.a)({},t,{page:r,pageData:H(t.sourceData,r,t.pageSize)});default:throw new Error}};var e}),[t]),c=Object(r.useMemo)((function(){var n=R(t)(e,G),r=H(n,1,a);return{sortType:G,page:1,pageSize:a,sourceData:n,pageData:r}}),[]),l=Object(r.useReducer)(n,c),o=Object(u.a)(l,2),s=o[0],m=o[1],d=s.pageData,p=s.sourceData,g=s.sortType,E=s.page,f=s.pageSize;return{handleSort:Object(r.useCallback)((function(e){m({type:"SORT",payload:e}),m({type:"CHANGE_PAGE",payload:1})}),[]),handleChangePage:Object(r.useCallback)((function(e){m({type:"CHANGE_PAGE",payload:e})}),[]),totalCount:p.length,page:E,pageData:d,pageSize:f,sortType:g}},W=(a(48),function(e){var t=e.currentSort,a=e.handleSort,n=Object(r.useCallback)((function(){a(t===T?G:T)}),[t,a]);return c.a.createElement(c.a.Fragment,null,t===T?c.a.createElement(L,{title:"sort",className:"rounded sort-button",onClick:n},"\u2191"):c.a.createElement(L,{title:"sort",className:"rounded sort-button",onClick:n},"\u2193"))}),X=(a(49),function(e){var t=e.reviews,a=I(t,"score",3),n=a.handleSort,r=a.handleChangePage,l=a.pageData,o=a.page,s=a.pageSize,i=a.totalCount,u=a.sortType;return c.a.createElement("section",{className:"rounded p-3 reviews"},c.a.createElement("header",{className:"d-flex align-items-center mb-4"},c.a.createElement("h3",{className:"mb-0 mr-3"},"Reviews"),c.a.createElement(W,{currentSort:u,handleSort:n})),c.a.createElement("ul",{className:"reviews-list"},l.map((function(e,t){var a=e.review,n=e.score;return c.a.createElement("li",{key:"".concat(a,"-").concat(t)},c.a.createElement("p",{className:"review clearfix"},c.a.createElement("span",{className:"score"},n),c.a.createElement("span",null,a)))}))),c.a.createElement(z,{handleChangePage:r,page:o,pageSize:s,totalCount:i,itemsInPageCount:l.length}))}),_=function(e){var t=e.hotelId,a=e.setNights,n=e.nights,l=m(h,{}),o=l.asyncFn,i=l.data,u=Object(s.a)(l,["asyncFn","data"]);Object(r.useEffect)((function(){o(t)}),[t]);var d=i.name,p=i.pictures,g=i.reviews,E=Object(r.useCallback)((function(e){var t=e.target.value;return t&&(e.target.value=Math.round(t)),t>365&&(e.target.value=365),a(e.target.value)}),[]);return c.a.createElement("div",{className:"hotel-details"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12"},c.a.createElement("div",{className:"shadow details-container"},c.a.createElement(C,u,c.a.createElement("div",{className:"py-3 px-4"},c.a.createElement("header",null,c.a.createElement("h2",{className:"title"},d),c.a.createElement("span",null,"For")," ",c.a.createElement("input",{className:"input",name:"nights",onChange:E,value:n,type:"number",min:1,max:365,step:"1"})," ",c.a.createElement("span",null,"Nights"))),c.a.createElement("div",{className:"p-2 p-md-5"},c.a.createElement(M,{pictures:p})),c.a.createElement("div",{className:"p-2 p-md-5"},c.a.createElement(X,{reviews:g})))))))},B=function(e){var t=Object(r.useState)(1),a=Object(u.a)(t,2),n=a[0],l=a[1],o=Object(r.useState)(),s=Object(u.a)(o,2),i=s[0],m=s[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"row hotels-list"},e.list.map((function(e){return c.a.createElement(A,{data:e,key:e.id,nights:n,isSelected:i===e.id,selectHotel:m})}))),c.a.createElement("div",{className:"py-2"},i&&c.a.createElement(_,{hotelId:i,setNights:l,nights:n})))};a(50);var J=function(){var e=m(v,[]),t=e.data,a=e.asyncFn,n=Object(s.a)(e,["data","asyncFn"]);return Object(r.useEffect)((function(){a()}),[]),c.a.createElement("main",{className:"main"},c.a.createElement(C,n,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"pt-5"},c.a.createElement(B,{list:t})))))};var $=function(){return c.a.createElement(j,null,c.a.createElement(O,null),c.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[17,1,2]]]);
//# sourceMappingURL=main.eab7c192.chunk.js.map